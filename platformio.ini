[platformio]
default_envs = mega2560_debug

[env]
platform = atmelavr
framework = arduino
board = megaatmega2560
monitor_speed = 115200

; Global (safe for libs too)
build_flags =
  -Os
  -ffunction-sections
  -fdata-sections
  -flto
  -Wl,--gc-sections

; Only your src/ files (not libraries)
build_src_flags =
  -Wall -Wextra -Wundef -Wshadow -Wformat=2 -Wno-sign-compare

lib_deps =
  olikraus/U8g2 @ ^2.35.19

[env:mega2560_debug]
build_type = debug
build_flags     = ${env.build_flags} -DDEBUG_SERIAL=1
build_src_flags = ${env.build_src_flags} -Og
; build_src_filter = +<src/sanity_check.cpp> -<*>


[env:mega2560_release]
build_type = release
build_flags     = ${env.build_flags} -DDEBUG_SERIAL=0
build_src_flags = ${env.build_src_flags} -Os
